version: 0

service {
  id: IDN
  timezone: Asia/Jakarta
}

sources: [
  {
    context: "bulk-relational-summarization:/data-lake/events"
    database: kakaopage-indonesia
    table: events
    pushdown-predicate: "date >= '"${?year}-${?month}-01"' and date <= '"${?year}-${?month}-31"'"
  },
  {
    context: data-warehouse/series_metadata
    database: kakaopage-indonesia
    table: series_metadata
    pushdown-predicate: ""
  }
]

sink {
  context: "bulk-relational-summarization:/data-warehouse/CRM/relational-summaries"
  path: "kakaopage-indonesia/data-warehouse/CRM/relational-summaries"
  partition-keys: [ "version", "date", "hour" ]
  partitions: 8
  partitions: ${?partitions}
  format: parquet
}